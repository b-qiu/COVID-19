install.packages('rsconnect')
install.packages('rsconnect')
rsconnect::setAccountInfo(name='benqiu', token='2845B95DA889BFE5CB49FAB7D24381BB', secret='MfOQ5fcxjHD/VCTHuPkCHdzi/RBRFCbQouCFRzC+')
rsconnect::deployApp("C:\Users\bkq\sp\COVID\R_estimation_shiny\_code\EstimatingR_shiny.R")
rsconnect::deployApp("C:/Users/bkq/sp/COVID/R_estimation_shiny/_code/EstimatingR_shiny.R")
rsconnect::deployApp("C:/Users/bkq/sp/COVID/R_estimation_shiny/_code/")
rsconnect::deployApp("C:/Users/bkq/sp/COVID/R_estimation_shiny/_code")
rsconnect::deployApp("C:/Users/bkq/sp/COVID/R_estimation_shiny/_code")
shiny::runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
?rvest
jh <- "https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv"
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
View(jh)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
filter(`Country/Region` == "Australia")
View(jh)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State:`, -`Long`, `Lat`) %>%
filter(`Country/Region` == "Australia")
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State:`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia")
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia")
View(jh)
ff <- colSums(Filter(is.numeric, jh))
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(region, dates, `1/22/20`:`4/13/20`)
View(jh)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases))
View(jh)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(as.Date(dates, "%m/%d/%Y"))
View(jh)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y"))
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y"),
n_cases = diff(cases))
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y"),
n_cases = c(0,diff(cases)))
View(jh)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(n_cases = c(0,diff(cases)))
View(jh)
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/blob/master/public/data/ecdc/new_cases_per_million.csv")
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/new_cases.csv")
View(ow)
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/new_cases.csv") %>%
select(date, Australia)
View(ow)
View(jh)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(n_cases = c(0,diff(cases))) %>%
rename(cases = n_cases) %>%
select(-n_cases)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(cases = c(0,diff(cases))) %>%
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/new_cases.csv") %>%
select(date, Australia)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(n_cases = c(0,diff(cases))) %>%
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/new_cases.csv") %>%
select(date, Australia)
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(n_cases = c(0,diff(cases)))
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, `1/22/20`:`4/13/20`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(cases = c(0,diff(cases)))
View(jh)
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/new_cases.csv") %>%
select(date, Australia) %>%
rename(dates = date, cases = Australia)
View(ow)
wo <- "https://www.worldometers.info/coronavirus/country/australia/"
wo_p <- read_html(wo)
wo_extract <- wo_p %>%
html_node("body") %>%
xml_find_all("//script[contains(@type, 'text/javascript')]") %>%
html_text()
wo_extract %>% save(file = "./_input/worldometer.Rdata")
w_daily_cases <- wo_extract[[11]]
w_data <- rm_between(w_daily_cases, "[", "]", extract = T)
xlab <- w_data[[1]][1] %>%
str_split(",") %>%
unlist(use.names = F) %>%
str_sub(2, 7) %>%
as.Date("%b %d")
ylab <- w_data[[1]][2] %>%
str_split(",") %>%
unlist(use.names = F) %>%
str_replace("null", "0") %>%
as.numeric()
wo_aus <- data.frame(dates = xlab, cases = ylab)
wo <- "https://www.worldometers.info/coronavirus/country/australia/"
wo_p <- read_html(wo)
p_load("tidyverse", "rvest",
"qdapRegex", "RCurl",)
install.packages("pacman")
library("pacman")
p_load("tidyverse", "rvest",
"qdapRegex", "RCurl",)
shiny::runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia")
View(jh)
?gather
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, -`Country/Region`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(cases = c(0,diff(cases)))
View(jh)
JH <- readRDS(file = "john_hopkins_data.RDS")
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
shiny::runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
shiny::runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
Null
NULL
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
data = jh
si_mean = 3.96
si_sd = 4.75
d_min = as.Date("2020-02-01")
d_max = as.Date("2020-04-13")
r_y = NULL
c_y = NULL
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, -`Country/Region`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(cases = c(0,diff(cases)))
data = jh
si_mean = 3.96
si_sd = 4.75
d_min = as.Date("2020-02-01")
d_max = as.Date("2020-04-13")
r_y = NULL
c_y = NULL
data = source
R_results <- estimate_R(data$cases,
method = "parametric_si",
config = make_config(list(mean_si = si_mean,
std_si = si_sd))) %>%
extract2(1) %>%
mutate(dates = data$dates[8:nrow(data)],
cases = data$cases[8:nrow(data)])
date_limits <- as.Date(c(d_min, d_max))
heightcheck_r <- R_results %>%
filter(dates >= as.Date(d_min) & dates <= as.Date(d_max)) %>%
summarise(max = max(`Mean(R)`)) %>%
extract2(1)
heightcheck_c <- R_results %>%
filter(dates >= as.Date(d_min) & dates <= as.Date(d_max)) %>%
summarise(max = max(cases)) %>%
extract2(1)
library("EpiEstim")
library("tidyverse")
library("ggpubr")
library("shiny")
library("scales")
data = source
R_results <- estimate_R(data$cases,
method = "parametric_si",
config = make_config(list(mean_si = si_mean,
std_si = si_sd))) %>%
extract2(1) %>%
mutate(dates = data$dates[8:nrow(data)],
cases = data$cases[8:nrow(data)])
source = jh
si_mean = 3.96
si_sd = 4.75
d_min = as.Date("2020-02-01")
d_max = as.Date("2020-04-13")
r_y = NULL
c_y = NULL
data = source
R_results <- estimate_R(data$cases,
method = "parametric_si",
config = make_config(list(mean_si = si_mean,
std_si = si_sd))) %>%
extract2(1) %>%
mutate(dates = data$dates[8:nrow(data)],
cases = data$cases[8:nrow(data)])
date_limits <- as.Date(c(d_min, d_max))
heightcheck_r <- R_results %>%
filter(dates >= as.Date(d_min) & dates <= as.Date(d_max)) %>%
summarise(max = max(`Mean(R)`)) %>%
extract2(1)
heightcheck_c <- R_results %>%
filter(dates >= as.Date(d_min) & dates <= as.Date(d_max)) %>%
summarise(max = max(cases)) %>%
extract2(1)
is.null(r_y)
y_max_r <- ifelse(heightcheck_r <= 3.8,
heightcheck_r * 1.2,
3.8 * 1.2)
3.8*1.2
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
p_r <- ggplot(R_results, aes(dates, `Mean(R)`)) +
geom_ribbon(aes(ymin = `Quantile.0.05(R)`,
ymax = `Quantile.0.95(R)`), fill = "grey70") +
geom_line() +
geom_hline(yintercept=1, linetype="dashed", color = "red") +
coord_cartesian(xlim = date_limits, ylim = c(0, y_max_r)) +
scale_x_date(date_breaks = "5 days", date_labels = "%b %d") +
ggtitle("Estimated instantaneous reproduction number") +
theme_bw() +
labs(y = "Estimated R (95% CI)") +
theme_update(plot.margin = margin(20, 20, 20, 20),
axis.title.x = element_blank())
p_r
is.null(c_y)
y_max_c <- heightcheck_c * 1.2
p_c <- ggplot(R_results, aes(dates, cases)) +
geom_col() +
scale_x_date(date_breaks = "5 days", date_labels = "%b %d") +
coord_cartesian(xlim = date_limits, ylim = c(0, y_max_c)) +
theme_bw() +
ggtitle("Number of confirmed new cases") +
labs(y = "Number of new cases") +
theme_update(plot.margin = margin(20, 20, 20, 20),
axis.title.x = element_blank())
p_r
p_c
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/new_cases.csv") %>%
select(date, Australia) %>%
rename(dates = date, cases = Australia)
source = ow
si_mean = 3.96
si_sd = 4.75
d_min = as.Date("2020-02-01")
d_max = as.Date("2020-04-13")
r_y = NULL
c_y = NULL
data = source
R_results <- estimate_R(data$cases,
method = "parametric_si",
config = make_config(list(mean_si = si_mean,
std_si = si_sd))) %>%
extract2(1) %>%
mutate(dates = data$dates[8:nrow(data)],
cases = data$cases[8:nrow(data)])
date_limits <- as.Date(c(d_min, d_max))
heightcheck_r <- R_results %>%
filter(dates >= as.Date(d_min) & dates <= as.Date(d_max)) %>%
summarise(max = max(`Mean(R)`)) %>%
extract2(1)
heightcheck_c <- R_results %>%
filter(dates >= as.Date(d_min) & dates <= as.Date(d_max)) %>%
summarise(max = max(cases)) %>%
extract2(1)
if(is.null(r_y)){
y_max_r <- ifelse(heightcheck_r <= 3.8,
heightcheck_r * 1.2,
3.8 * 1.2)
} else {
y_max_r = r_y
}
if(is.null(c_y)){
y_max_c <- heightcheck_c * 1.2
} else {
y_max_c = c_y
}
p_r <- ggplot(R_results, aes(dates, `Mean(R)`)) +
geom_ribbon(aes(ymin = `Quantile.0.05(R)`,
ymax = `Quantile.0.95(R)`), fill = "grey70") +
geom_line() +
geom_hline(yintercept=1, linetype="dashed", color = "red") +
coord_cartesian(xlim = date_limits, ylim = c(0, y_max_r)) +
scale_x_date(date_breaks = "5 days", date_labels = "%b %d") +
ggtitle("Estimated instantaneous reproduction number") +
theme_bw() +
labs(y = "Estimated R (95% CI)") +
theme_update(plot.margin = margin(20, 20, 20, 20),
axis.title.x = element_blank())
p_r
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
is.numeric(NULL)
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/new_cases.csv") %>%
select(date, Australia) %>%
mutate(date = date - 1) %>%
rename(dates = date, cases = Australia)
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
rm(list = ls())
library("pacman")
p_load("tidyverse", "rvest", "here",
"qdapRegex", "RCurl", "magrittr")
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, -`Country/Region`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(cases = c(0,diff(cases)))
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/new_cases.csv") %>%
select(date, Australia) %>%
mutate(date = date - 1) %>%
rename(dates = date, cases = Australia)
wo <- read_html("https://www.worldometers.info/coronavirus/country/australia/") %>%
html_node("body") %>%
xml_find_all("//script[contains(@type, 'text/javascript')]") %>%
html_text() %>%
extract2(11) %>%
rm_between("[", "]", extract = T)
xlab <- wo[[1]][1] %>%
str_split(",") %>%
unlist(use.names = F) %>%
str_sub(2, 7) %>%
as.Date("%b %d")
ylab <- wo[[1]][2] %>%
str_split(",") %>%
unlist(use.names = F) %>%
str_replace("null", "0") %>%
as.numeric()
wo <- data.frame(dates = xlab, cases = ylab)
savedRDS(wo, here("worldometer_data.RDS"))
savedRDS(ow, here("our_world_data.RDS"))
savedRDS(jh, here("john_hopkins_data.RDS"))
# saveRDS(wo, file = paste0(here(),"/worldometer_data.RDS"))
# saveRDS(ow, file = paste0(here(),"our_world_data.RDS"))
# saveRDS(jh, file = paste0(here(),"john_hopkins_data.RDS"))
saveRDS(wo, here("worldometer_data.RDS"))
here()
shiny::runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
shiny::runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
?withMathJax
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
shiny::runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
runApp('C:/Users/bkq/sp/COVID/R_estimation_shiny/Aus_COVID19_R')
rm(list = ls())
library("pacman")
p_load("tidyverse", "rvest",
"qdapRegex", "RCurl", "magrittr")
jh <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv") %>%
select(-`Province/State`, -`Long`, -`Lat`) %>%
filter(`Country/Region` == "Australia") %>%
gather(dates, cases, -`Country/Region`) %>%
group_by(dates) %>%
summarize(cases = sum(cases)) %>%
mutate(dates = as.Date(dates, "%m/%d/%y")) %>%
arrange(dates) %>%
mutate(cases = c(0,diff(cases)))
ow <- read_csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/ecdc/new_cases.csv") %>%
select(date, Australia) %>%
mutate(date = date - 1) %>%
rename(dates = date, cases = Australia)
wo <- read_html("https://www.worldometers.info/coronavirus/country/australia/") %>%
html_node("body") %>%
xml_find_all("//script[contains(@type, 'text/javascript')]") %>%
html_text() %>%
extract2(11) %>%
rm_between("[", "]", extract = T)
xlab <- wo[[1]][1] %>%
str_split(",") %>%
unlist(use.names = F) %>%
str_sub(2, 7) %>%
as.Date("%b %d")
ylab <- wo[[1]][2] %>%
str_split(",") %>%
unlist(use.names = F) %>%
str_replace("null", "0") %>%
as.numeric()
wo <- data.frame(dates = xlab, cases = ylab)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
saveRDS(wo, file = "worldometer_data.RDS")
saveRDS(ow, file = "our_world_data.RDS")
saveRDS(jh, file = "john_hopkins_data.RDS")
runApp()
